{% extends 'core/base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100 transition-colors duration-300">
      Broadcast Kit Dashboard
    </h1>

    <form method="get">
        <label for="sort" class="text-gray-700 dark:text-gray-300 mr-2">Sort by:</label>
        <select name="sort" id="sort"
                class="bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-2 py-1 rounded-md"
                onchange="this.form.submit()">
          <option value="number" {% if sort_option == 'number' %}selected{% endif %}>Kit Number </option>
          <option value="latest" {% if sort_option == 'latest' %}selected{% endif %}>Latest Update</option>
        </select>
    </form>
</div>

<!-- Add a subtle dark mode background for the grid area -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {% for kit in kits %}
    <div class="bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100
                p-4 rounded-xl shadow-md transition-colors duration-300">

      <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2">
        {{ kit.name }}
      </h2>

      <p><strong class="text-gray-800 dark:text-gray-200">Status:</strong> {{ kit.get_status_display }}</p>
      <p><strong class="text-gray-800 dark:text-gray-200">Location:</strong> {{ kit.current_location|default:"—" }}</p>
      <p><strong class="text-gray-800 dark:text-gray-200">Destination:</strong> {{ kit.destination_location|default:"—" }}</p>

      {% if kit.issues %}
        <p><strong class="text-gray-800 dark:text-gray-200">Issues:</strong>
          <span class="text-red-700 dark:text-red-400">{{ kit.issues }}</span>
        </p>
      {% else %}
        <p class="text-green-700 dark:text-green-400 font-semibold mt-2">No issues reported</p>
      {% endif %}

      {% if kit.needs_restock %}
        <p class="text-red-600 dark:text-red-400 font-semibold mt-2">Needs Restock</p>
      {% else %}
        <p class="text-green-600 dark:text-green-400 font-semibold mt-2">Stock OK</p>
      {% endif %}

      <a href="{% url 'view_kit' kit.id %}"
         class="mt-3 inline-block bg-gray-700 dark:bg-gray-600 text-white
                px-3 py-1 rounded-md hover:bg-gray-800 dark:hover:bg-gray-700 transition-colors duration-300">
         View Details
      </a>
    </div>
  {% endfor %}
</div>
{% endblock %}
